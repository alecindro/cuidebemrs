<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/resources/template.xhtml">
	<ui:define name="content">
		<p:outputPanel id="createuser">
			<p:panel
				header="#{bundle.cadresponsavel} do paciente #{responsavelmb.paciente.nome}"
				toggleable="true">
				<h:form>
					<h:inputHidden value="#{responsavelmb.responsavel.idresponsavel}" />
					<p:panelGrid columns="2" layout="grid"
						columnClasses="twenty-percent,eighty-percent">
						<p:outputLabel value="#{bundle.form_nome} *" for="nome"></p:outputLabel>
						<p:inputText id="nome" value="#{responsavelmb.responsavel.nome}"
							title="#{bundle.nome}" styleClass="fifty-percent"
							requiredMessage="#{bundle.requiredmessage_nome}"></p:inputText>
						<p:outputLabel value="#{bundle.form_apelido}" for="apelido" />
						<p:inputText id="apelido"
							value="#{responsavelmb.responsavel.apelido}"
							title="#{bundle.apelido}" styleClass="fifty-percent" />
						<p:outputLabel value="#{bundle.form_email}" for="email" />
						<p:inputText id="email" autocomplete="off"
							value="#{responsavelmb.responsavel.email}"
							title="#{bundle.email}" type="email" styleClass="fifty-percent"
							requiredMessage="#{bundle.requiredmessage_email}">
							<p:keyFilter mask="email"></p:keyFilter>
						</p:inputText>
						<p:outputLabel value="#{bundle.form_genero}" for="genero" />
								<p:selectOneRadio id="genero"
									value="#{responsavelmb.responsavel.genero}" required="true"
									layout="responsive" columns="1"
									requiredMessage="#{bundle.EditUsuarioRequiredMessage_genero}">
									<f:selectItem itemLabel="#{bundle.feminino}" itemValue="false" />
									<f:selectItem itemLabel="#{bundle.masculino}" itemValue="true" />
								</p:selectOneRadio>
						<p:outputLabel value="#{bundle.form_vinculo}" for="vinculo"/>
								<p:selectOneMenu  id="vinculo" required="true" requiredMessage="#{bundle.vinculo_requeridmessage}"
									value="#{responsavelmb.responsavel.vinculo}"
									>
									<f:selectItem itemLabel="#{bundle.select_vinculo}" itemValue="" />
									<f:selectItem itemLabel="#{bundle.esposo}" itemValue="#{bundle.esposo}" />
									<f:selectItem itemLabel="#{bundle.filho}" itemValue="#{bundle.filho}" />
									<f:selectItem itemLabel="#{bundle.genro}" itemValue="#{bundle.genro}" />
									<f:selectItem itemLabel="#{bundle.neto}" itemValue="#{bundle.neto}" />
									<f:selectItem itemLabel="#{bundle.sobrinho}" itemValue="#{bundle.sobrinho}" />
									<f:selectItem itemLabel="#{bundle.amigo}" itemValue="#{bundle.amigo}" />
									<f:selectItem itemLabel="#{bundle.outro}" itemValue="#{bundle.outro}" />
								</p:selectOneMenu>
						<p:outputLabel value="#{bundle.form_tpresponsavel}" for="tpresponsavel" />
								<p:selectOneRadio id="tpresponsavel"
									value="#{responsavelmb.responsavel.tpresponsavel}" required="true"
									layout="responsive" columns="1"
									requiredMessage="#{bundle.tpresponsavel_requiredmessage}">
									<f:selectItem itemLabel="#{bundle.contato}" itemValue="true" />
									<f:selectItem itemLabel="#{bundle.financeiro}" itemValue="false" />
								</p:selectOneRadio>
									<p:outputLabel value="#{bundle.form_cpf}" for="cpf" />
						<p:inputText id="cpf" 
							value="#{responsavelmb.responsavel.cpf}"
							title="#{bundle.cpf}" styleClass="fifty-percent"
							><p:keyFilter mask="pint"></p:keyFilter>
						</p:inputText>
								<p:outputLabel value="#{bundle.form_rg}" for="rg" />
						<p:inputText id="rg" 
							value="#{responsavelmb.responsavel.rg}"
							title="#{bundle.rg}" styleClass="fifty-percent"
							><p:keyFilter mask="pint"></p:keyFilter>
						</p:inputText>
						<p:outputLabel value="#{bundle.form_endereco}" for="endereco" />
						<p:inputText id="endereco" maxlength="255"
							value="#{responsavelmb.responsavel.endereco}"
							title="#{bundle.endereco}" styleClass="fifty-percent"
							>
						</p:inputText>
						<p:outputLabel value="#{bundle.form_cep}" for="cep" />
						<p:inputText id="cep" maxlength="8"
							value="#{responsavelmb.responsavel.cep}"
							title="#{bundle.cep}" styleClass="fifty-percent"
							>
							<p:keyFilter mask="pint"></p:keyFilter>
						</p:inputText>
						<p:outputLabel value="#{bundle.form_cidade}" for="cidade" />
						<p:inputText id="cidade" maxlength="255"
							value="#{responsavelmb.responsavel.cidade}"
							title="#{bundle.cidade}" styleClass="fifty-percent"
							>
						</p:inputText>
						<p:outputLabel value="#{bundle.form_estado}" for="estado"/>
								<p:selectOneMenu  id="estado" editable="true"
									value="#{responsavelmb.responsavel.estado}"
									>
									<f:selectItem itemLabel="#{bundle.select_estado}" itemValue="" />
									<f:selectItem itemLabel="Acre" itemValue="Acre" />
									<f:selectItem itemLabel="Alagoas" itemValue="Alagoas" />
									<f:selectItem itemLabel="Amapá" itemValue="Amapá" />
									<f:selectItem itemLabel="Amazonas" itemValue="Amazonas" />
									<f:selectItem itemLabel="Bahia" itemValue="Bahia" />
									<f:selectItem itemLabel="Ceará" itemValue="Ceará"/>
									<f:selectItem itemLabel="Distrito Federal" itemValue="Distrito Federal" />
									<f:selectItem itemLabel="Espírito Santo" itemValue="Espírito Santo" />
									<f:selectItem itemLabel="Goiás" itemValue="Goiás" />
									<f:selectItem itemLabel="Maranhão" itemValue="Maranhão" />
									<f:selectItem itemLabel="Mato Grosso" itemValue="Mato Grosso" />
									<f:selectItem itemLabel="Mato Grosso do Sul" itemValue="Mato Grosso do Sul" />
									<f:selectItem itemLabel="Minas Gerais" itemValue="Minas Gerais" />
									<f:selectItem itemLabel="Pará" itemValue="Pará" />
									<f:selectItem itemLabel="Paraíba" itemValue="Paraíba" />
									<f:selectItem itemLabel="Paraná" itemValue="Paraná" />
									<f:selectItem itemLabel="Pernambuco" itemValue="Pernambuco" />
									<f:selectItem itemLabel="Piauí" itemValue="Distrito Federal" />
									<f:selectItem itemLabel="Rio de Janeiro" itemValue="Rio de Janeiro" />
									<f:selectItem itemLabel="Rio Grande do Norte" itemValue="Rio Grande do Norte" />
									<f:selectItem itemLabel="Rio Grande do Sul" itemValue="Rio Grande do Sul" />
									<f:selectItem itemLabel="Rondônia" itemValue="Rondônia" />
									<f:selectItem itemLabel="Roraima" itemValue="Roraima" />
									<f:selectItem itemLabel="Santa Catarina" itemValue="Santa Catarina" />
									<f:selectItem itemLabel="São Paulo" itemValue="São Paulo" />
									<f:selectItem itemLabel="Sergipe" itemValue="Sergipe" />
									<f:selectItem itemLabel="Tocantis" itemValue="Tocantis" />
								
								</p:selectOneMenu>
							<p:outputLabel value="#{bundle.form_datanascimento}"
							for="datanascimento" />
						<p:calendar id="datanascimento" pattern="dd/MM/yyyy"
							navigator="true" mode="popup" yearRange="c-80:c+0"
							value="#{responsavelmb.responsavel.datanascimento}"
							title="#{bundle.datanascimento}" showOn="button" />
					
					</p:panelGrid>
					<p:commandButton value="#{bundle.return}"
						action="/app/paciente/paciente.xhtml">
						<f:param name="idpaciente"
							value="#{responsavelmb.paciente.idpaciente}"></f:param>
					</p:commandButton>
					<p:commandButton value="#{bundle.delete}"
								action="#{responsavelmb.deleteResponsavel}"
								rendered="#{responsavelmb.responsavel.idresponsavel != null}">
								<p:confirm header="#{bundle.confirmation}" message="#{bundle.message_delete}" icon="ui-icon-alert" />
								<f:param name="idpaciente"
									value="#{responsavelmb.paciente.idpaciente}" />
									<f:param name="idresponsavel" value="#{responsavelmb.responsavel.idresponsavel}"/>
							</p:commandButton>
					<p:commandButton value="#{bundle.save}"
						action="#{responsavelmb.saveResponsavel}" update="createuser">
						<f:param name="idpaciente"
							value="#{responsavelmb.paciente.idpaciente}" />
						
						</p:commandButton>
				</h:form>
			</p:panel>
			<p:panel header="#{bundle.foto}"
				visible="#{responsavelmb.responsavel.idresponsavel != null}"
				toggleable="true">

				<h:form>
					<h:inputHidden value="#{responsavelmb.responsavel.idresponsavel}" />
					<h:inputHidden value="#{responsavelmb.paciente.idpaciente}" />
					<p:panelGrid columns="2" layout="grid"
						columnClasses="thirty-percent,seventy-percent">
						<p:outputPanel id="userimage">
							<p:graphicImage
								url="/rs/images/responsavel/#{responsavelmb.responsavel.idresponsavel}"
								cache="false"></p:graphicImage>
						</p:outputPanel>


						<p:fileUpload id="photo" cancelLabel="#{bundle.cancel}"
							multiple="false" uploadLabel="#{bundle.save}"
							label="#{bundle.alter}" allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
							invalidFileMessage="São permitidas somente imagens (gif, jpeg, jpg e png)"
							fileUploadListener="#{responsavelmb.handlePhotoResponsavel}"
							mode="advanced" update="userimage">
							<h:inputHidden value="#{responsavelmb.responsavel.idresponsavel}"
								id="iduserphoto" />
						</p:fileUpload>
					</p:panelGrid>
				</h:form>
			</p:panel>
			<p:panel header="#{bundle.telefones}"
				visible="#{responsavelmb.responsavel.idresponsavel != null}"
				toggleable="true">
				<h:form>
					<p:panelGrid columns="2" layout="grid"
						columnClasses="twenty-percent,eighty-percent">
						<p:outputLabel value="#{bundle.form_tipotelefone}"
							for="tipotelefone" />
						<p:selectOneMenu value="#{responsavelmb.telefone.tipo}"
							id="tipotelefone" title="#{bundle.tipotelefone}">
							<f:selectItem itemLabel="Selecione" />
							<f:selectItems value="#{usuariomb.tipoTelefones}"
								var="tipotelefone" itemLabel="#{tipotelefone.name()}"
								itemValue="#{tipotelefone.name()}"></f:selectItems>
						</p:selectOneMenu>
						<p:outputLabel value="#{bundle.form_operadora}" for="operadora" />
						<p:selectOneMenu value="#{responsavelmb.telefone.operadora}"
							id="operadora" title="#{bundle.operadora}">
							<f:selectItem itemLabel="Selecione" />
							<f:selectItems value="#{usuariomb.operadoras}" var="operadora"
								itemLabel="#{operadora.name()}" itemValue="#{operadora.name()}"></f:selectItems>
						</p:selectOneMenu>
						<p:outputLabel value="#{bundle.form_ddd}" for="ddd" />
						<p:inputText id="ddd" value="#{responsavelmb.telefone.ddd}"
							title="#{bundle.ddd}" required="true" styleClass="five-percent"
							maxlength="2" requiredMessage="#{bundle.requiredmessage_ddd}">
							<p:keyFilter mask="pint"></p:keyFilter>
						</p:inputText>
						<p:outputLabel value="#{bundle.form_telefone}" for="telefone" />
						<p:inputText id="telefone"
							value="#{responsavelmb.telefone.telefone}"
							title="#{bundle.telefone}" required="true"
							requiredMessage="#{bundle.requiredmessage_telefone}">
							<p:keyFilter mask="pint"></p:keyFilter>
						</p:inputText>
					</p:panelGrid>
					<p:commandButton value="#{bundle.add}"
						action="#{responsavelmb.savePhoneResponsavel}"
						update="@parent:@parent">
						<f:param name="idresponsavel"
							value="#{responsavelmb.responsavel.idresponsavel}" />
						<f:param name="idpaciente"
							value="#{responsavelmb.paciente.idpaciente}" />
					</p:commandButton>
				</h:form>


				<h:form>
					<p:dataTable value="#{responsavelmb.telefones}" var="telefone"
						id="listel" selection="#{responsavelmb.telefone}" paginator="true"
						rows="10" selectionMode="single" rowKey="#{telefone.idtelefone}">
						<p:column headerText="#{bundle.telefone}">
							<h:outputText value="(#{telefone.ddd}) #{telefone.telefone}" />
						</p:column>
						<p:column headerText="#{bundle.tipotelefone}">
							<h:outputText value="#{telefone.tipo}" />
						</p:column>
						<p:column headerText="#{bundle.operadora}">
							<h:outputText value="#{telefone.operadora}" />
						</p:column>
						<p:column>
							<p:commandButton value="#{bundle.delete}"
								action="#{responsavelmb.delPhone}" update="@form:listel">
								<p:confirm header="#{bundle.confirmation}" message="#{bundle.message_delete}" icon="ui-icon-alert" />
								<f:param name="idresponsavel"
									value="#{responsavelmb.responsavel.idresponsavel}" />
								<f:param name="idpaciente"
									value="#{responsavelmb.paciente.idpaciente}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>
				</h:form>


			</p:panel>
		</p:outputPanel>

	</ui:define>
</ui:composition>
</html>